<?php

use Drupal\field\Entity\FieldConfig;
use Drupal\field\Entity\FieldStorageConfig;

/**
 * Add a ContentSynced field.
 */
function sd38_content_sync_install() {
  $content_types = \Drupal::entityTypeManager()
    ->getStorage('node_type')
    ->loadMultiple();

  foreach ($content_types as $type) {

    if (in_array($type->id(), ['page', 'article', 'news_alert']) &&
      !FieldStorageConfig::loadByName('node','field_content_synced')) {

      $field = FieldStorageConfig::create([
        'field_name'  => 'field_content_synced',
        'entity_type' => 'node',
        'type'        => 'boolean',
        'cardinality' => 1,
        'label'       => 'Is it District node',
      ]);
      $field->save();
    }

    if (in_array($type->id(), ['page', 'article', 'news_alert']) &&
      !FieldStorageConfig::loadByName('node','field_district_id')) {

      $field = FieldStorageConfig::create([
        'field_name'  => 'field_district_id',
        'entity_type' => 'node',
        'type'        => 'string',
        'cardinality' => 1,
        'label'       => 'District Node ID',
      ]);
      $field->save();
    }
  }
}
